# Process json file 
import shapefile
f = open("kenya_districts98.json","w")
shp = shapefile.Reader("kenya_districts98.shp")
shapes = shp.shapes()
records = shp.records()

means = [134.83822222222219, 401.14453488372078, 628.45722222222219, 519.16673076923075, -1., 680.73942857142845, 560.18518518518511, 847.58319999999969, 379.23222222222211, 261.80279999999999, 509.22503937007895, 664.85744000000011, 473.00344444444443, 1783.1654545454546, 326.30012195121952, 551.941358024691, 1108.6801666666661, 1400.8886956521744, 186.30488372093021, 106.03790697674418, 518.09617021276597, 204.33892857142857, 210.99379746835444, 343.03102564102556, 700.78661764705873, 211.60870370370372, 382.99553571428572, 573.21201680672289, 534.08413333333306, 175.01374999999996, 539.89666666666665, 132.82238095238097, 515.45109375000004, 453.62, 375.61920634920637, 9783.2176190476202, 528.91853658536593, -1., 24052.386804123707, 1385.2340425531916, 333.61951612903221, 75.916571428571444, 836.13236842105255, 230.47654320987652, 560.34219387755138, 54.778796296296299, 388.71792307692317, 235.33884057971022, 304.15285714285721, 48.537096774193536, -1., 125.66266666666667, 938.59037037037035, 1084.0131578947369, 24.96050632911393, -1., -1., 1152.0657142857142, 187.80611111111105, 149.91585365853658] 

count = 0
beginning = """
{ "type": "FeatureCollection",
    "features": [
"""
f.write(beginning)
for i in range(len(shapes)):
   shape = shapes[i]
   avg_popdensity = means[i]
   if (avg_popdensity <= -1): 
      avg_popdensity = "null"
   record = records[i]
   # "bbox": %s
   shape_entry ="""
   {
        "type": "Feature",
        "properties": {
         "name": "%s",
         "density": %s
        },
        "geometry": {
           "type": "Polygon",
           "coordinates":[%s]
        }
   },

   """ % ( record, avg_popdensity,str(shape.points))#(str(shape.bbox), str(shape.points), record)
   f.write(shape_entry)
end = """
]
     }
"""
f.write(end)
f.close()
